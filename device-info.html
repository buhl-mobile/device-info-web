<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Handydaten automatisch erfassen</title>

  <!-- Importieren der Mobile-Detect.js-Bibliothek -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mobile-detect/1.4.4/mobile-detect.min.js"></script>
  
  <script>
    // Funktion zum Abrufen der Handydaten
    function getDeviceInfo() {
      const md = new MobileDetect(window.navigator.userAgent);

      // Daten des Geräts sammeln
      const deviceInfo = {
        os: md.os(),
        model: md.model(),
        storage: 'Unbekannt', // Diese Information kann nicht direkt erfasst werden
        color: 'Unbekannt', // Diese Information kann nicht direkt erfasst werden
        battery: 'Unbekannt', // Diese Information kann nicht direkt erfasst werden
      };

      // Optional: Batterieinfo könnte über Battery API abgerufen werden
      navigator.getBattery().then(function(battery) {
        deviceInfo.battery = battery.level * 100 + '%'; // Batterielevel als Prozentsatz
      });

      // Senden der erfassten Daten an dein Backend
      sendDataToBackend(deviceInfo);
    }

    // Funktion zum Senden der gesammelten Handydaten an die API
    function sendDataToBackend(deviceInfo) {
      fetch('https://device-info-backend.onrender.com/device-info', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(deviceInfo),
      })
      .then(response => response.json())
      .then(data => {
        console.log('Erfolg:', data);
        alert('Daten wurden erfolgreich gesendet!');
      })
      .catch((error) => {
        console.error('Fehler:', error);
        alert('Fehler beim Senden der Daten!');
      });
    }
    
    // Aufrufen der Funktion, sobald die Seite geladen ist
    window.onload = getDeviceInfo;
  </script>

</head>
<body>

<h1>Handydaten automatisch erfassen</h1>

<!-- Hier könnte eine Meldung erscheinen, dass die Daten gerade erfasst werden -->
<p>Die Handydaten werden gerade erfasst...</p>

</body>
</html>
